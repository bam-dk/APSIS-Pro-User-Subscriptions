/*! apsis-pro-user-subscriptions - v1.0.0 - 2017-01-12 */jQuery(document).ready(function(a){function b(b,c,d,e,f,g){var h={action:"apsispro_us_action",listid:d,email:e,name:f,mode:b};return a.ajax({url:apsispro_us_ajax_object.ajax_url,type:"POST",data:h,async:!0,success:function(a){if(void 0!==a||a!==-1){var b=jQuery.parseJSON(a);1===b.Code?(c.next(".apsispro-us-signup-response").text(""),g&&window.location.reload()):b.Message.indexOf("is not a valid e-mail address")>-1?c.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_email):c.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)}else c.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)},error:function(a){c.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)}})}function c(b,c,d){var e={action:"apsispro_us_action",listid:c,email:d,mode:"remove"};return a.ajax({url:apsispro_us_ajax_object.ajax_url,type:"POST",async:!0,data:e,success:function(a){if(void 0!==a||a!==-1){var c=jQuery.parseJSON(a);1===c.Code?b.next(".apsispro-us-signup-response").text(""):c.Message.indexOf("is not a valid e-mail address")>-1?b.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_email):b.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)}else b.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)},error:function(a){b.next(".apsispro-us-signup-response").text(apsispro_us_ajax_object.error_msg_standard)}})}a(".apsispro-user-subscription-form").submit(function(d){a(this).find(".apsispro-us-spinner").css("display","inline-block"),a(this).find(".apsispro-us-signup-button").attr("disabled",!0);var e=a(this),f=e.find(".apsispro-us-signup-email").val(),g=e.find(".apsispro-us-signup-name").val(),h=e.find(".apsispro-us-signup-mailinglist-id");if(h.length>0)b("register",e,h.val(),f,g,!1);else{var i,j=!0,k=[];e.find(".apsispro-us-signup-mailinglists-id").each(function(){a(this).is(":checked")?(i=b("register",e,a(this).val(),f,g,!1),j=!1):i=c(e,a(this).val(),f),k.push(i)}),a.when.apply(null,k).done(function(){k=[],j?""!==apsispro_us_ajax_object.default_list&&(i=b("register",e,apsispro_us_ajax_object.default_list,f,g,!0)):""!==apsispro_us_ajax_object.default_subscriber_list&&(i=b("default-sub",e,apsispro_us_ajax_object.default_subscriber_list,f,g,!0)),k.push(i),a.when.apply(null,k).done(function(){a(".apsispro-us-signup-button").attr("disabled",!1),a(".apsispro-us-spinner").css("display","none")})})}return!1})});